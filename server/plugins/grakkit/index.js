var L={};(function(e){if(Object.defineProperty(e,"__esModule",{value:!0}),e.sync=e.simplify=e.root=e.reload=e.regex=e.push=e.load=e.file=e.fetch=e.event=e.env=e.data=e.context=e.task=e.command=e.chain=e.desync=e.type=e.session=void 0,"Grakkit"in globalThis)Object.assign(globalThis,{Core:Grakkit});else if("Core"in globalThis)Object.assign(globalThis,{Grakkit:Core});else throw"Polyglot"in globalThis?"Grakkit was not detected (or is very outdated) in your environment!":"Java"in globalThis?"GraalJS was not detected in your environment!":"Java was not detected in your environment!";e.session={data:new Map,event:new Map,load:new Map,poly:{index:0,list:new Map},task:{list:new Set,tick:0},type:new Map};function l(i){if(e.session.type.has(i))return e.session.type.get(i);{const n=Java.type(i);return e.session.type.set(i,n),n}}e.type=l;const v=l("java.nio.file.Files"),T=l("java.lang.String"),S=l("java.nio.file.Paths"),h=l("java.util.regex.Pattern"),p=l("java.util.Scanner"),o=l("java.net.URL"),g=l("java.util.UUID");e.desync={async provide(i){try{const{data:n,uuid:r}=JSON.parse(e.context.meta);try{e.context.emit(r,JSON.stringify({data:await i(n),status:!0}))}catch(t){e.context.emit(r,JSON.stringify({data:t,status:!1}))}}catch{throw"The current context's metadata is incompatible with the desync system!"}},async request(i,n={}){if(m(i).exists){const t=g.randomUUID().toString(),s=e.context.on(t);e.context.create("file",m(i).io.getAbsolutePath(),JSON.stringify({data:n,uuid:t})).open();const a=JSON.parse(await s);if(a.status)return a.data;throw a.data}else throw"That file does not exist!"},shift(i){switch(e.env.name){case"bukkit":return new Promise((n,r)=>{e.env.content.server.getScheduler().runTaskAsynchronously(e.env.content.plugin,new e.env.content.Runnable(async()=>{try{n(await i())}catch(t){r(t)}}))});case"minestom":return new Promise(async(n,r)=>{try{n(await i())}catch(t){r(t)}})}}};function f(i,n){const r=t=>n(t,r);return r(i)}e.chain=f;function u(i){switch(e.env.name){case"bukkit":{e.env.content.plugin.register(i.namespace||e.env.content.plugin.getName(),i.name,i.aliases||[],i.permission||"",i.message||"",(n,r,t)=>{try{!i.permission||n.hasPermission(i.permission)?i.execute&&i.execute(n,...t):n.sendMessage(i.message||"")}catch(s){console.error(`An error occured while attempting to execute the "${r}" command!`),console.error(s.stack||s.message||s)}},(n,r,t)=>{try{return i.tabComplete&&i.tabComplete(n,...t)||[]}catch(s){return console.error(`An error occured while attempting to tab-complete the "${r}" command!`),console.error(s.stack||s.message||s),[]}});break}case"minestom":{const n=new e.env.content.Command(i.name);n.addSyntax((r,t)=>{try{i.execute&&i.execute(r,...t.getInput().split(" ").slice(1))}catch(s){console.error(`An error occured while attempting to execute the "${i.name}" command!`),console.error(s.stack||s.message||s)}},e.env.content.ArgumentType.StringArray("tab-complete").setSuggestionCallback((r,t,s)=>{for(const a of i.tabComplete(r,...t.getInput().split(" ").slice(1))||[])s.addEntry(new e.env.content.SuggestionEntry(a))})),e.env.content.registry.register(n)}}}e.command=u,e.task={cancel(i){e.session.task.list.delete(i)},interval(i,n=0,...r){const t=e.task.timeout((...s)=>{t.tick+=Math.ceil(n<1?1:n),i(...s)},0,...r);return t},timeout(i,n=0,...r){const t={tick:e.session.task.tick+Math.ceil(n<0?0:n),args:r,script:i};return e.session.task.list.add(t),t}},e.context=(()=>{try{return{create(i,n,r){return Grakkit[`${i}Instance`](n,r)},destroy(){Grakkit.destroy()},emit(i,n){Grakkit.emit(i,n)},meta:Grakkit.getMeta(),off(i,n){return Grakkit.off(i,n)},on:(i,n)=>n?Grakkit.on(i,n):new Promise(r=>{const t=s=>{e.context.off(i,t),r(s)};e.context.on(i,t)}),swap(){b(Grakkit.swap)}}}catch{const n={},r=[];return e.task.interval(()=>{for(const t of r.splice(0,r.length))if(t.channel in n)for(const s of n[t.channel])try{s(t.content)}catch(a){console.error("An error occured while attempting to listen for a message!"),console.error(a.stack||a.message||a)}}),{create(){throw"Your current version of Grakkit does not support creating new contexts!"},destroy(){throw"The primary instance cannot be destroyed!"},emit(t,s){r.push({channel:t,content:s})},meta:"grakkit",off(t,s){if(t in n){const a=n[t];a.includes(s)&&a.splice(a.indexOf(s),1)}},on:(t,s)=>{if(s)n[t]||(n[t]=[]).push(s);else return new Promise(a=>{const c=d=>{e.context.off(t,c),a(d)};e.context.on(t,c)})},swap(){b(Grakkit.swap)}}}})();function y(i,...n){const r=S.get(i,...n).normalize().toString();if(e.session.data.has(r))return e.session.data.get(r);{const t=m(e.root,"data",`${r}.json`).json()||{};return e.session.data.set(r,t),t}}e.data=y,e.env=(()=>{try{const i=l("org.bukkit.Bukkit"),n=i.getPluginManager(),r=n.getPlugin("grakkit");return Grakkit.hook(()=>{l("org.bukkit.event.HandlerList").unregisterAll(r)}),{content:{EventPriority:l("org.bukkit.event.EventPriority"),instance:new(Java.extend(l("org.bukkit.event.Listener"),{})),manager:n,plugin:r,Runnable:l("java.lang.Runnable"),server:i.getServer()},name:"bukkit"}}catch{try{const n=l("net.minestom.server.MinecraftServer"),r=n.getExtensionManager(),t=r.getExtension("grakkit");return{content:{ArgumentType:l("net.minestom.server.command.builder.arguments.ArgumentType"),Command:l("net.minestom.server.command.builder.Command"),extension:t,manager:r,node:t.getEventNode(),registry:n.getCommandManager(),server:n,SuggestionEntry:l("net.minestom.server.command.builder.suggestion.SuggestionEntry")},name:"minestom"}}catch{return{name:"unknown",content:{}}}}})();function G(i,...n){switch(e.env.name){case"bukkit":{let r;e.session.event.has(i)?r=e.session.event.get(i):(r=new Set,e.session.event.set(i,r));const t=new Set;for(const s of n)typeof s=="function"?t.has("HIGHEST")||t.add("HIGHEST"):t.has(s.priority)||t.add(s.priority);for(const s of r)typeof s=="function"?t.has("HIGHEST")&&t.delete("HIGHEST"):t.has(s.priority)&&t.delete(s.priority);for(const s of t){const a=l(i);e.env.content.manager.registerEvent(a.class,e.env.content.instance,e.env.content.EventPriority.valueOf(s),(c,d)=>{if(d instanceof a)try{for(const w of r)typeof w=="function"?s==="HIGHEST"&&w(d):s===w.priority&&w.script(d)}catch(w){console.error(`An error occured while attempting to handle the "${i}" event!`),console.error(w.stack||w.message||w)}},e.env.content.plugin)}for(const s of n)r.has(s)||r.add(s)}break;case"minestom":{let r;if(e.session.event.has(i)?r=e.session.event.get(i):(r=new Set,e.session.event.set(i,r)),r.size===0){const t=l(i);e.env.content.node.addListener(t.class,s=>{try{for(const a of r)typeof a=="function"?a(s):a.script(s)}catch(a){console.error(`An error occured while attempting to handle the "${i}" event!`),console.error(a.stack||a.message||a)}})}for(const t of n)r.has(t)||r.add(t)}break}}e.event=G;function A(i){const n={json(r){if(r)return n.read(!0).then(t=>JSON.parse(t));try{return JSON.parse(n.read())}catch(t){throw t}},read(r){return r?e.desync.request(M,{link:i,operation:"fetch.read"}):new p(n.stream()).useDelimiter("\\A").next()},stream(){return new o(i).openStream()}};return n}e.fetch=A;function m(i,...n){i=typeof i=="string"?i:"io"in i?i.path:i.getPath();const r=S.get(i,...n).normalize().toFile(),t={get children(){return t.type==="folder"?[...r.listFiles()].map(s=>m(s.getPath())):null},directory(){return t.type==="none"&&f(r,(s,a)=>{const c=s.getParentFile();c&&(c.exists()||a(c)),s.mkdir()}),t},entry(){return t.type==="none"&&t.parent.directory()&&r.createNewFile(),t},get exists(){return r.exists()},file(...s){return m(r,...s)},flush(){return f(r,(s,a)=>{const c=s.getParentFile();c&&c.isDirectory()&&(c.listFiles()[0]||c.delete()&&a(c))}),t},io:r,json(s){if(s)return t.read(!0).then(a=>JSON.parse(a));try{return JSON.parse(t.read())}catch{return null}},get name(){return r.getName()},get parent(){return t.file("..")},get path(){return e.regex.replace(r.getPath(),"(\\\\)","/")},read(s){return s?e.desync.request(M,{operation:"file.read",path:t.path}):t.type==="file"?new T(v.readAllBytes(r.toPath())).toString():null},remove(){return f(r,(s,a)=>{s.isDirectory()&&[...s.listFiles()].forEach(a),s.exists()&&s.delete()}),t.flush()},get type(){return r.isDirectory()?"folder":r.exists()?"file":"none"},write(s,a){return a?e.desync.request(M,{content:s,operation:"file.write",path:t.path}).then(()=>t):(t.type==="file"&&v.write(r.toPath(),new T(s).getBytes()),t)}};return t}e.file=m;function P(i,n){if(e.session.load.has(n))return e.session.load.get(n);{const r=m(i);if(r.exists){const t=Grakkit.load(r.io,n);return e.session.load.set(n,t),t}else throw new ReferenceError(`The file "${r.path}" does not exist!`)}}e.load=P;function b(i){Grakkit.push(i)}e.push=b,e.regex={test(i,n){return i.matches(n)},replace(i,n,r){return h.compile(n).matcher(i).replaceAll(r)}};function E(){b(Grakkit.reload||Grakkit.swap)}e.reload=E,e.root=m(Grakkit.getRoot());function k(i,n,r){if(i&&typeof i=="object"){if(r||(r=new Set),r.has(i))return n;{r.add(i);const t=typeof i[Symbol.iterator]=="function"?[]:{};for(const s in i)t[s]=k(i[s],n,new Set(r));return t}}else return i}e.simplify=k;function $(i){return new Promise((n,r)=>{Grakkit.sync(()=>i().then(n).catch(r))})}e.sync=$,f(void 0,(i,n)=>{Grakkit.push(n);for(const r of e.session.task.list)if(e.session.task.tick>r.tick)e.session.task.list.delete(r);else if(e.session.task.tick===r.tick)try{r.script(...r.args)}catch(t){console.error("An error occured while attempting to execute a task!"),console.error(t.stack||t.message||t)}++e.session.task.tick}),Grakkit.hook(()=>{for(const[i]of e.session.data)m(e.root,"data",`${i}.json`).entry().write(JSON.stringify(k(e.session.data.get(i))))});const M=`${__dirname}/async.js`,I="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",H=Promise.resolve();Object.assign(globalThis,{atob(i){var n=e.regex.replace(String(i),"[=]+$","");if(n.length%4===1)throw new Error("'atob' failed: The string to be decoded is not correctly encoded.");for(var r=0,t,s,a=0,c="";s=n.charAt(a++);~s&&(t=r%4?t*64+s:s,r++%4)?c+=String.fromCharCode(255&t>>(-2*r&6)):0)s=I.indexOf(s);return c},btoa(i){for(var n=String(i),r,t,s=0,a=I,c="";n.charAt(s|0)||(a="=",s%1);c+=a.charAt(63&r>>8-s%1*8)){if(t=n.charCodeAt(s+=3/4),t>255)throw new Error("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");r=r<<8|t}return c},clearImmediate(i){e.task.cancel(e.session.poly.list.get(i))},clearInterval(i){e.task.cancel(e.session.poly.list.get(i))},clearTimeout(i){e.task.cancel(e.session.poly.list.get(i))},queueMicrotask(i){H.then(i).catch(n=>{e.task.timeout(()=>{throw n})})},setInterval(i,n=0,...r){return e.session.poly.list.set(e.session.poly.index,e.task.interval(typeof i=="string"?()=>Polyglot.eval("js",i):i,Math.ceil(n/50),...r)),e.session.poly.index++},setTimeout(i,n=0,...r){return e.session.poly.list.set(e.session.poly.index,e.task.timeout(typeof i=="string"?()=>Polyglot.eval("js",i):i,Math.ceil(n/50),...r)),e.session.poly.index++},setImmediate(i,...n){return e.session.poly.list.set(e.session.poly.index,e.task.timeout(typeof i=="string"?()=>Polyglot.eval("js",i):i,0,...n)),e.session.poly.index++}})})(L);var J={},C={},U;function _(){return U||(U=1,function(e){if(Object.defineProperty(e,"__esModule",{value:!0}),e.sync=e.simplify=e.root=e.reload=e.regex=e.push=e.load=e.file=e.fetch=e.event=e.env=e.data=e.context=e.task=e.command=e.chain=e.async=e.type=e.session=void 0,"Grakkit"in globalThis)Object.assign(globalThis,{Core:Grakkit});else if("Core"in globalThis)Object.assign(globalThis,{Grakkit:Core});else throw"Grakkit was not detected in your current environment!";e.session={data:new Map,event:new Map,load:new Map,poly:{index:0,list:new Map},task:{list:new Set,tick:0},type:new Map};function l(n){if(e.session.type.has(n))return e.session.type.get(n);{const r=Java.type(n);return e.session.type.set(n,r),r}}e.type=l;const v=l("java.nio.file.Files"),T=l("java.lang.String"),S=l("java.nio.file.Paths"),h=l("java.util.regex.Pattern"),p=l("java.util.Scanner"),o=l("java.net.URL"),g=l("java.util.UUID");function f(n){switch(e.env.name){case"bukkit":return new Promise((r,t)=>{e.env.content.server.getScheduler().runTaskAsynchronously(e.env.content.plugin,new e.env.content.Runnable(async()=>{try{r(await n())}catch(s){t(s)}}))});case"minestom":return new Promise(async(r,t)=>{try{r(await n())}catch(s){t(s)}})}}e.async=f;function u(n,r){const t=s=>r(s,t);return t(n)}e.chain=u;function y(n){switch(e.env.name){case"bukkit":{e.env.content.plugin.register(n.namespace||e.env.content.plugin.getName(),n.name,n.aliases||[],n.permission||"",n.message||"",(r,t,s)=>{try{!n.permission||r.hasPermission(n.permission)?n.execute&&n.execute(r,...s):r.sendMessage(n.message||"")}catch(a){console.error(`An error occured while attempting to execute the "${t}" command!`),console.error(a.stack||a.message||a)}},(r,t,s)=>{try{return n.tabComplete&&n.tabComplete(r,...s)||[]}catch(a){return console.error(`An error occured while attempting to tab-complete the "${t}" command!`),console.error(a.stack||a.message||a),[]}});break}case"minestom":{const r=new e.env.content.Command(n.name);r.addSyntax((t,s)=>{try{n.execute&&n.execute(t,...s.getInput().split(" ").slice(1))}catch(a){console.error(`An error occured while attempting to execute the "${n.name}" command!`),console.error(a.stack||a.message||a)}},e.env.content.ArgumentType.StringArray("tab-complete").setSuggestionCallback((t,s,a)=>{for(const c of n.tabComplete(t,...s.getInput().split(" ").slice(1))||[])a.addEntry(new e.env.content.SuggestionEntry(c))})),e.env.content.registry.register(r)}}}e.command=y,e.task={cancel(n){e.session.task.list.delete(n)},interval(n,r=0,...t){const s=e.task.timeout((...a)=>{s.tick+=Math.ceil(r<1?1:r),n(...a)},0,...t);return s},timeout(n,r=0,...t){const s={tick:e.session.task.tick+Math.ceil(r<0?0:r),args:t,script:n};return e.session.task.list.add(s),s}},e.context=(()=>{try{const n=Grakkit.getMeta();return{create(r,t,s){return Grakkit[`${r}Instance`](t,s)},destroy(){Grakkit.destroy()},emit(r,t){Grakkit.emit(r,t)},meta:n,off(r,t){return Grakkit.off(r,t)},on:(r,t)=>t?Grakkit.on(r,t):Grakkit.on(r)}}catch{const r={},t=[];return e.task.interval(()=>{for(const s of t.splice(0,t.length))if(s.channel in r)for(const a of r[s.channel])try{a(s.content)}catch(c){console.error("An error occured while attempting to listen for a message!"),console.error(c.stack||c.message||c)}}),{create(){throw"Your current version of Grakkit does not support creating new contexts!"},destroy(){throw"The primary instance cannot be destroyed!"},emit(s,a){t.push({channel:s,content:a})},meta:"grakkit",off(s,a){if(s in r){const c=r[s];c.includes(a)&&c.splice(c.indexOf(a),1)}},on:(s,a)=>{if(a)r[s]||(r[s]=[]).push(a);else return new Promise(c=>{const d=w=>{e.context.off(s,d),c(w)};e.context.on(s,d)})}}}})();function G(n,...r){const t=S.get(n,...r).normalize().toString();if(e.session.data.has(t))return e.session.data.get(t);{const s=P(e.root,"data",`${t}.json`).json()||{};return e.session.data.set(t,s),s}}e.data=G,e.env=(()=>{try{const n=l("org.bukkit.Bukkit"),r=n.getPluginManager(),t=r.getPlugin("grakkit");return Grakkit.hook(()=>{l("org.bukkit.event.HandlerList").unregisterAll(t)}),{content:{EventPriority:l("org.bukkit.event.EventPriority"),instance:new(Java.extend(l("org.bukkit.event.Listener"),{})),manager:r,plugin:t,Runnable:l("java.lang.Runnable"),server:n.getServer()},name:"bukkit"}}catch{try{const r=l("net.minestom.server.MinecraftServer"),t=r.getExtensionManager(),s=t.getExtension("grakkit");return{content:{ArgumentType:l("net.minestom.server.command.builder.arguments.ArgumentType"),Command:l("net.minestom.server.command.builder.Command"),extension:s,manager:t,node:s.getEventNode(),registry:r.getCommandManager(),server:r,SuggestionEntry:l("net.minestom.server.command.builder.suggestion.SuggestionEntry")},name:"minestom"}}catch{return{name:"unknown",content:{}}}}})();function A(n,...r){switch(e.env.name){case"bukkit":{let t;e.session.event.has(n)?t=e.session.event.get(n):(t=new Set,e.session.event.set(n,t));const s=new Set;for(const a of r)typeof a=="function"?s.has("HIGHEST")||s.add("HIGHEST"):s.has(a.priority)||s.add(a.priority);for(const a of t)typeof a=="function"?s.has("HIGHEST")&&s.delete("HIGHEST"):s.has(a.priority)&&s.delete(a.priority);for(const a of s){const c=l(n);e.env.content.manager.registerEvent(c.class,e.env.content.instance,e.env.content.EventPriority.valueOf(a),(d,w)=>{if(w instanceof c)try{for(const O of t)typeof O=="function"?a==="HIGHEST"&&O(w):a===O.priority&&O.script(w)}catch(O){console.error(`An error occured while attempting to handle the "${n}" event!`),console.error(O.stack||O.message||O)}},e.env.content.plugin)}for(const a of r)t.has(a)||t.add(a)}break;case"minestom":{let t;if(e.session.event.has(n)?t=e.session.event.get(n):(t=new Set,e.session.event.set(n,t)),t.size===0){const s=l(n);e.env.content.node.addListener(s.class,a=>{try{for(const c of t)typeof c=="function"?c(a):c.script(a)}catch(c){console.error(`An error occured while attempting to handle the "${n}" event!`),console.error(c.stack||c.message||c)}})}for(const s of r)t.has(s)||t.add(s)}break}}e.event=A;function m(n){const r={json(t){if(t)return r.read(!0).then(s=>JSON.parse(s));try{return JSON.parse(r.read())}catch(s){throw s}},read(t){return t?new Promise(async s=>{const a=g.randomUUID().toString();e.context.on(a).then(c=>{s(c)}),e.context.create("file",`${I}/async.js`,JSON.stringify({link:n,operation:"fetch.read",uuid:a})).open()}):new p(r.stream()).useDelimiter("\\A").next()},stream(){return new o(n).openStream()}};return r}e.fetch=m;function P(n,...r){n=typeof n=="string"?n:"io"in n?n.path:n.getPath();const t=S.get(n,...r).normalize().toFile(),s={get children(){return s.type==="folder"?[...t.listFiles()].map(a=>P(a.getPath())):null},directory(){return s.type==="none"&&u(t,(a,c)=>{const d=a.getParentFile();d&&(d.exists()||c(d)),a.mkdir()}),s},entry(){return s.type==="none"&&s.parent.directory()&&t.createNewFile(),s},get exists(){return t.exists()},file(...a){return P(t,...a)},flush(){return u(t,(a,c)=>{const d=a.getParentFile();d&&d.isDirectory()&&(d.listFiles()[0]||d.delete()&&c(d))}),s},io:t,json(a){if(a)return s.read(!0).then(c=>JSON.parse(c));try{return JSON.parse(s.read())}catch{return null}},get name(){return t.getName()},get parent(){return s.file("..")},get path(){return e.regex.replace(t.getPath(),"(\\\\)","/")},read(a){return a?new Promise(async c=>{const d=g.randomUUID().toString();e.context.on(d).then(w=>{c(w)}),e.context.create("file",`${I}/async.js`,JSON.stringify({path:s.path,operation:"file.read",uuid:d})).open()}):s.type==="file"?new T(v.readAllBytes(t.toPath())).toString():null},remove(){return u(t,(a,c)=>{a.isDirectory()&&[...a.listFiles()].forEach(c),a.exists()&&a.delete()}),s.flush()},get type(){return t.isDirectory()?"folder":t.exists()?"file":"none"},write(a,c){return c?new Promise(async d=>{const w=g.randomUUID().toString();e.context.on(w).then(()=>{d(s)}),e.context.create("file",`${I}/async.js`,JSON.stringify({content:a,path:s.path,operation:"file.write",uuid:w})).open()}):(s.type==="file"&&v.write(t.toPath(),new T(a).getBytes()),s)}};return s}e.file=P;function b(n,r){if(e.session.load.has(r))return e.session.load.get(r);{const t=P(n);if(t.exists){const s=Grakkit.load(t.io,r);return e.session.load.set(r,s),s}else throw new ReferenceError(`The file "${t.path}" does not exist!`)}}e.load=b;function E(n){Grakkit.push(n)}e.push=E,e.regex={test(n,r){return n.matches(r)},replace(n,r,t){return h.compile(r).matcher(n).replaceAll(t)}};function k(){E(Grakkit.swap)}e.reload=k,e.root=P(Grakkit.getRoot());function $(n,r,t){if(n&&typeof n=="object"){if(t||(t=new Set),t.has(n))return r;{t.add(n);const s=typeof n[Symbol.iterator]=="function"?[]:{};for(const a in n)s[a]=$(n[a],r,new Set(t));return s}}else return n}e.simplify=$;function M(n){return new Promise((r,t)=>{Grakkit.sync(()=>n().then(r).catch(t))})}e.sync=M,u(void 0,(n,r)=>{Grakkit.push(r);for(const t of e.session.task.list)if(e.session.task.tick>t.tick)e.session.task.list.delete(t);else if(e.session.task.tick===t.tick)try{t.script(...t.args)}catch(s){console.error("An error occured while attempting to execute a task!"),console.error(s.stack||s.message||s)}++e.session.task.tick}),Grakkit.hook(()=>{for(const[n]of e.session.data)P(e.root,"data",`${n}.json`).entry().write(JSON.stringify($(e.session.data.get(n))))});const I=__dirname,H="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i=Promise.resolve();Object.assign(globalThis,{atob(n){var r=e.regex.replace(String(n),"[=]+$","");if(r.length%4===1)throw new Error("'atob' failed: The string to be decoded is not correctly encoded.");for(var t=0,s,a,c=0,d="";a=r.charAt(c++);~a&&(s=t%4?s*64+a:a,t++%4)?d+=String.fromCharCode(255&s>>(-2*t&6)):0)a=H.indexOf(a);return d},btoa(n){for(var r=String(n),t,s,a=0,c=H,d="";r.charAt(a|0)||(c="=",a%1);d+=c.charAt(63&t>>8-a%1*8)){if(s=r.charCodeAt(a+=3/4),s>255)throw new Error("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");t=t<<8|s}return d},clearImmediate(n){e.task.cancel(e.session.poly.list.get(n))},clearInterval(n){e.task.cancel(e.session.poly.list.get(n))},clearTimeout(n){e.task.cancel(e.session.poly.list.get(n))},queueMicrotask(n){i.then(n).catch(r=>{e.task.timeout(()=>{throw r})})},setInterval(n,r=0,...t){return e.session.poly.list.set(e.session.poly.index,e.task.interval(typeof n=="string"?()=>Polyglot.eval("js",n):n,Math.ceil(r/50),...t)),e.session.poly.index++},setTimeout(n,r=0,...t){return e.session.poly.list.set(e.session.poly.index,e.task.timeout(typeof n=="string"?()=>Polyglot.eval("js",n):n,Math.ceil(r/50),...t)),e.session.poly.index++},setImmediate(n,...r){return e.session.poly.list.set(e.session.poly.index,e.task.timeout(typeof n=="string"?()=>Polyglot.eval("js",n):n,0,...r)),e.session.poly.index++}})}(C)),C}var j;function q(){return j||(j=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.format=e.circular=e.array=void 0;const l=_(),v=l.type("java.lang.Class"),T=l.type("java.lang.Iterable"),S=l.type("java.util.Iterator"),h=l.type("java.util.Spliterator");function p(o){if(o instanceof Array)return[...o];if(o instanceof T){const g=[];return o.forEach(f=>{g.push(f)}),g}else if(o instanceof S||o instanceof h){const g=[];return o.forEachRemaining(f=>{g.push(f)}),g}else return null}e.array=p,e.circular=Symbol(),e.format={error(o){let g="Error",f=`${o}`;if(o.stack)switch(g=o.stack.split(`
`)[0].split(" ")[0].slice(0,-1),f=o.message,g){case"TypeError":try{if(f.startsWith("invokeMember")||f.startsWith("execute on foreign object")){const u=f.split("failed due to: ")[1];u.startsWith("no applicable overload found")?f=["Invalid arguments! Expected:",...u.split("overloads:")[1].split("]],")[0].split(")]").map(G=>`(${G.split("(").slice(1).join("(")})`)].join(`
 -> `).slice(0,-1):u.startsWith("Arity error")?f=`Invalid argument amount! Expected: ${u.split("-")[1].split(" ")[2]}`:u.startsWith("UnsupportedTypeException")?f="Invalid arguments!":u.startsWith("Unknown identifier")?f=`That method (${u.split(": ")[1]}) does not exist!`:u.startsWith("Message not supported")?f=`That method (${f.slice(14).split(")")[0]}) does not exist!`:f=f.split(`
`)[0]}}catch{f=f.split(`
`)[0]}break;case"SyntaxError":f=f.split(" ").slice(1).join(" ").split(`
`)[0]}else o=`${o}`,g=o.split(" ")[0].slice(0,-1),f=o.split(" ").slice(1).join(" ");return`${g}: ${f}`},output(o,g){if(g===!0){if(o===e.circular)return"...";{const f=toString.call(o);switch(f){case"[object Array]":case"[object Object]":case"[object Function]":return f.split(" ")[1].slice(0,-1);case"[foreign HostObject]":if(o instanceof v&&typeof o.getCanonicalName=="function")return o.getCanonicalName();if(typeof o.toString=="function"){const y=o.toString();if(y)return y}const u=typeof o.getClass=="function"?o.getClass():o.class;return u instanceof v&&typeof u.getCanonicalName=="function"?u.getCanonicalName():`${o}`||`${u}`||"Object";case"[foreign HostFunction]":return"Function";default:switch(typeof o){case"bigint":return o.toString()+"n";case"function":return"Function";case"object":return o?"Object":"null";case"symbol":return`<${o.toString().slice(7,-1)}>`;case"undefined":return"undefined";default:return JSON.stringify(o)}}}}else switch(toString.call(o)){case"[object Array]":return`[ ${[...o].map(u=>e.format.output(o===u?e.circular:u,!0)).join(", ")} ]`;case"[object Object]":return`{ ${[...Object.getOwnPropertyNames(o).map(u=>`${u}: ${e.format.output(o===o[u]?e.circular:o[u],!0)}`),...Object.getOwnPropertySymbols(o).map(u=>`${e.format.output(u,!0)}: ${e.format.output(o===o[u]?e.circular:o[u],!0)}`)].join(", ")} }`;case"[object Function]":return o instanceof v&&typeof o.getCanonicalName=="function"?o.getCanonicalName():typeof o.toString=="function"?l.regex.replace(o.toString(),"\\r",""):`${o}`||"function () { [native code] }";case"[foreign HostFunction]":return"hostFunction () { [native code] }";default:const f=p(o);return f?e.format.output(f):e.format.output(o,!0)}}},l.command({name:"js",permission:"grakkit.command.js",message:"Â§cYou do not have the required permission to run this command!",execute(o,...g){const f=globalThis.hasOwnProperty("self");f||(globalThis.self=o);let u;try{const y=Polyglot.eval("js",g.join(" "));f||delete globalThis.self,u=e.format.output(y)}catch(y){f||delete globalThis.self,u=e.format.error(y)}switch(l.env.name){case"bukkit":o.sendMessage(u);break;case"minestom":o.sendMessage(u);break}},tabComplete(o,...g){let f="",u=-1,y=globalThis,G=!0,A=!1,m=!1,P=!1,b="";const E=g.join(" ");for(;G&&++u<E.length;){const k=E[u];if(P)k==="*"&&E[u+1]==="/"&&(b?E[u+2]===";"&&(P=!1):(f=E.slice(0,u+2),P=!1));else if(A)k==="\\"?++u:k===A&&(y={},A=!1);else if(m===!0)["'",'"',"`"].includes(k)?m=k:G=!1;else if(typeof m=="string")switch(k){case"\\":++u;break;case m:m=-1;break;default:b+=k}else switch(k){case"/":switch(E[u+1]){case"/":G=!1;break;case"*":P=!0;break}break;case"'":case'"':case"`":m===-1?G=!1:A=k;break;case")":case"{":case"}":m||(y={});break;case".":case"[":m||(k==="."||b?(f=E.slice(0,u+1),y===globalThis&&b==="self"&&!y.hasOwnProperty("self")?y=o:y=y[b]||{},k==="."||(m=!0),b=""):(f=E.slice(0,u+1),y=globalThis));break;case"]":m===-1&&(m=!1);break;case"\\":typeof m=="string"?++u:G=!1;break;case" ":b?G=!1:f="";break;default:l.regex.test(k,"[\\+\\-\\*\\/\\^=!&\\|\\?:\\(,;]")?m||(f=E.slice(0,u+1),y=globalThis,b=""):b+=k}}if(G&&y&&!(P||A)){const k=[...Object.getOwnPropertyNames(y.constructor?y.constructor.prototype||{}:{}),...Object.getOwnPropertyNames(y)];return y===globalThis&&!k.includes("self")&&k.push("self"),k.sort().filter($=>$.toLowerCase().includes(b.toLowerCase())).filter($=>m||l.regex.test($,"[_A-Za-z$][_0-9A-Za-z$]*")).map($=>m?`${f}\`${l.regex.replace($,"`","\\`").split("\\").join("\\\\")}\`]`:`${f}${$}`)}else return[]}})}(J)),J}const N=L;N.context.meta==="grakkit"&&q();const R={manager:N.env.content.manager,plugin:N.env.content.plugin,server:N.env.content.server},z=Object.assign({},N,R);Object.assign(globalThis,R,{core:z});const B=Java.type("org.bukkit.Bukkit"),W=Java.type("org.bukkit.event.EventPriority"),Y=Java.type("org.bukkit.event.Listener"),D=B.getPluginManager(),Z=D.getPlugin("grakkit"),F={event:new Map},X=new(Java.extend(Y,{}));function V(e,...l){let v;const T=e.class.toString();F.event.has(T)?v=F.event.get(T):(v=new Set,F.event.set(T,v));const S=new Set;for(const h of l)typeof h=="function"?S.has("HIGHEST")||S.add("HIGHEST"):S.has(h.priority)||S.add(h.priority);for(const h of v)typeof h=="function"?S.has("HIGHEST")&&S.delete("HIGHEST"):S.has(h.priority)&&S.delete(h.priority);for(const h of S)D.registerEvent(e.class,X,W.valueOf(h),(p,o)=>{if(o instanceof e)try{for(const g of v)typeof g=="function"?h==="HIGHEST"&&g(o):h===g.priority&&g.script(o)}catch(g){console.error(`An error occured while attempting to handle the "${T}" event!`),console.error(g.stack||g.message||g)}},Z);for(const h of l)v.has(h)||v.add(h)}const K=Java.type("org.bukkit.attribute.Attribute"),Q=Java.type("org.bukkit.event.player.PlayerJoinEvent");V(Q,e=>{var h;const l=e.getPlayer(),v=l.getLocation(),T=v.getWorld().getName();["-----------------------------------",`Name: ${l.getName()}`,`IP Address: ${l.getAddress().getHostName()}`,`Game Mode: ${l.getGameMode().toString()}`,`Location: {
        x: ${v.getX()},
        y: ${v.getY()},
        z: ${v.getZ()},
        world: ${T}
    }`,`Health: ${l.getHealth()}/${(h=l.getAttribute(K.GENERIC_MAX_HEALTH))==null?void 0:h.getValue()}`,`Is Flying: ${l.isFlying()?"Yes":"No"}`,"-----------------------------------"].forEach(p=>console.log(p))});
